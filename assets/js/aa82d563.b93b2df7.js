"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9213],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>u});var a=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var k=a.createContext({}),o=function(e){var n=a.useContext(k),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=o(e.components);return a.createElement(k.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,i=e.originalType,k=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),d=o(t),u=l,g=d["".concat(k,".").concat(u)]||d[u]||c[u]||i;return t?a.createElement(g,s(s({ref:n},p),{},{components:t})):a.createElement(g,s({ref:n},p))}));function u(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var i=t.length,s=new Array(i);s[0]=d;var r={};for(var k in n)hasOwnProperty.call(n,k)&&(r[k]=n[k]);r.originalType=e,r.mdxType="string"==typeof e?e:l,s[1]=r;for(var o=2;o<i;o++)s[o]=t[o];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},33:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>k,contentTitle:()=>s,default:()=>c,frontMatter:()=>i,metadata:()=>r,toc:()=>o});var a=t(7462),l=(t(7294),t(3905));const i={slug:"/",sidebar_position:1,title:"Docker\u5b89\u88c5Jenkins\uff0cNginx\uff0c\u5b9e\u73b0\u524d\u7aef\u9879\u76ee\u81ea\u52a8\u5316\u6784\u5efa",data:"2023\u5e741\u670804\u65e5"},s="Docker\u5b89\u88c5Jenkins\uff0cNginx\uff0c\u5b9e\u73b0\u524d\u7aef\u9879\u76ee\u81ea\u52a8\u5316\u6784\u5efa",r={unversionedId:"home",id:"home",title:"Docker\u5b89\u88c5Jenkins\uff0cNginx\uff0c\u5b9e\u73b0\u524d\u7aef\u9879\u76ee\u81ea\u52a8\u5316\u6784\u5efa",description:"\u5b89\u88c5 Docker",source:"@site/web/Jenkins/home.md",sourceDirName:".",slug:"/",permalink:"/Jenkins/",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/web/Jenkins/home.md",tags:[],version:"current",lastUpdatedBy:"fenghang",lastUpdatedAt:1672817373,formattedLastUpdatedAt:"Jan 4, 2023",sidebarPosition:1,frontMatter:{slug:"/",sidebar_position:1,title:"Docker\u5b89\u88c5Jenkins\uff0cNginx\uff0c\u5b9e\u73b0\u524d\u7aef\u9879\u76ee\u81ea\u52a8\u5316\u6784\u5efa",data:"2023\u5e741\u670804\u65e5"},sidebar:"tutorialSidebar"},k={},o=[{value:"\u5b89\u88c5 Docker",id:"\u5b89\u88c5-docker",level:2},{value:"\u5b89\u88c5 Jenkins",id:"\u5b89\u88c5-jenkins",level:2},{value:"\u62c9\u53d6 jenkins \u955c\u50cf",id:"\u62c9\u53d6-jenkins-\u955c\u50cf",level:3},{value:"\u8fd0\u884c\u5bb9\u5668",id:"\u8fd0\u884c\u5bb9\u5668",level:3},{value:"\u914d\u7f6eJenkins",id:"\u914d\u7f6ejenkins",level:3},{value:"\u95ee\u9898\uff1a",id:"\u95ee\u9898",level:4},{value:"\u5b89\u88c5\u63d2\u4ef6",id:"\u5b89\u88c5\u63d2\u4ef6",level:3},{value:"\u5b89\u88c5 Nginx",id:"\u5b89\u88c5-nginx",level:2},{value:"\u628a\u6253\u5305\u540e\u8fdb\u884c\u90e8\u7f72",id:"\u628a\u6253\u5305\u540e\u8fdb\u884c\u90e8\u7f72",level:2}],p={toc:o};function c(e){let{components:n,...i}=e;return(0,l.kt)("wrapper",(0,a.Z)({},p,i,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"docker\u5b89\u88c5jenkinsnginx\u5b9e\u73b0\u524d\u7aef\u9879\u76ee\u81ea\u52a8\u5316\u6784\u5efa"},"Docker\u5b89\u88c5Jenkins\uff0cNginx\uff0c\u5b9e\u73b0\u524d\u7aef\u9879\u76ee\u81ea\u52a8\u5316\u6784\u5efa"),(0,l.kt)("h2",{id:"\u5b89\u88c5-docker"},"\u5b89\u88c5 Docker"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"// \u5b89\u88c5\ncurl -fsSL get.docker.com -o get-docker.sh\nsh get-docker.sh\n// \u542f\u52a8Docker\u670d\u52a1\nsystemctl start docker\n// \u5f00\u673a\u9ed8\u8ba4\u542f\u52a8\nsystemctl enable docker\n")),(0,l.kt)("p",null,"\u6267\u884c\u4e00\u4e0b",(0,l.kt)("inlineCode",{parentName:"p"},"docker -v"),"\uff0c\u53ef\u4ee5\u7528\u6765\u67e5\u770b Docker \u5b89\u88c5\u7684\u7248\u672c\u4fe1\u606f\u3002\u4e5f\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u67e5\u770b docker \u7684\u5b89\u88c5\u72b6\u6001\uff1b\u5982\u679c\u6b63\u5e38\u5c55\u793a\u7248\u672c\u4fe1\u606f\uff0c\u4ee3\u8868 Docker \u5df2\u7ecf\u5b89\u88c5\u6210\u529f\u3002"),(0,l.kt)("p",null,"\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"docker ps"),"\u67e5\u770b\u5bb9\u5668\u72b6\u6001\u3002"),(0,l.kt)("h2",{id:"\u5b89\u88c5-jenkins"},"\u5b89\u88c5 Jenkins"),(0,l.kt)("h3",{id:"\u62c9\u53d6-jenkins-\u955c\u50cf"},"\u62c9\u53d6 jenkins \u955c\u50cf"),(0,l.kt)("p",null,"\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"docker pull")," \u547d\u4ee4\u62c9\u53d6\u955c\u50cf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker pull jenkins/jenkins\n")),(0,l.kt)("h3",{id:"\u8fd0\u884c\u5bb9\u5668"},"\u8fd0\u884c\u5bb9\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -d --name jenkins -p 8080:8080 -p 50000:50000 jenkins/jenkins\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u53c2\u6570\u8bf4\u660e"),(0,l.kt)("ul",{parentName:"blockquote"},(0,l.kt)("li",{parentName:"ul"},"--name \u5b9a\u4e49\u4e00\u4e2a\u5bb9\u5668\u7684\u540d\u5b57\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a\uff0c\u90a3\u4e48\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u968f\u673a\u6570\u5b57\u7b26\u4e32\u5f53\u505aUUID"),(0,l.kt)("li",{parentName:"ul"},"-d \u6807\u8bc6\u662f\u8ba9 docker \u5bb9\u5668\u5728\u540e\u53f0\u8fd0\u884c"),(0,l.kt)("li",{parentName:"ul"},"-p 9000:8080 \u7aef\u53e3\u6620\u5c04\uff0c\u5c06\u5bbf\u4e3b\u673a9000\u7aef\u53e3\u6620\u5c04\u5230\u5bb9\u56688080\u7aef\u53e3"),(0,l.kt)("li",{parentName:"ul"},"-p 50000:50000 50000\u7aef\u53e3\u662f\u57fa\u4e8eJNLP\u7684Jenkins\u4ee3\u7406\uff08slave\uff09\u901a\u8fc7TCP\u4e0e Jenkins master \u8fdb\u884c\u901a\u4fe1\u7684\u7aef\u53e3\u3002"))),(0,l.kt)("p",null,"\u542f\u52a8\u540e\u53ef\u4ee5\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"docker ps")," \u6765\u67e5\u770b\u670d\u52a1\u60c5\u51b5\u3002\n",(0,l.kt)("img",{alt:"docker \u5bb9\u5668\u72b6\u6001",src:t(4099).Z,title:"docker \u5bb9\u5668\u72b6\u6001",width:"1075",height:"255"})),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5728\u4e91\u670d\u52a1\u5668\u7684\u9632\u706b\u5899\u91cc\u6253\u5f008080\u7aef\u53e3\u624d\u80fd\u8bbf\u95ee\u3002"),(0,l.kt)("li",{parentName:"ul"},"\u7136\u540e\u901a\u8fc7\u670d\u52a1\u5668ip\uff1a8080\u7aef\u53e3\u5c31\u53ef\u4ee5\u8bbf\u95ee\u6211\u4eec\u7684 jenkins \u670d\u52a1")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u4f8b\u5982\u5728\u963f\u91cc\u4e91\u4e2d\u8fdb\u884c\u5b89\u5168\u7ec4\u914d\u7f6e\n",(0,l.kt)("img",{alt:"\u5b89\u5168\u7ec4\u914d\u7f6e",src:t(5163).Z,title:"\u5b89\u5168\u7ec4\u914d\u7f6e",width:"1868",height:"669"}))),(0,l.kt)("h3",{id:"\u914d\u7f6ejenkins"},"\u914d\u7f6eJenkins"),(0,l.kt)("p",null,"\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"http://<ipaddress>:8080")," \u8bbf\u95ee Jenkins \u754c\u9762"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"jenkins\u521d\u59cb\u5316\u5bc6\u7801",src:t(2592).Z,title:"jenkins\u521d\u59cb\u5316\u5bc6\u7801",width:"932",height:"558"})),(0,l.kt)("p",null,"\u7531\u4e8e\u6211\u4eec\u662f\u7528 docker \u5b89\u88c5\u7684\uff0c\u6240\u4ee5\u5bc6\u7801\u4f1a\u88ab\u5b58\u50a8\u5230\u5bb9\u5668\u4e2d\u3002\n\u7ba1\u7406\u5458\u521d\u59cb\u5bc6\u7801\u88ab\u653e\u5230\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"/var/jenkins_home/secrets/initialAdminPassword")," \u6587\u4ef6\u4e2d\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -it jenkins bash\n")),(0,l.kt)("p",null,"\u8fdb\u5165\u5bb9\u5668\u67e5\u770b\u5bc6\u7801\uff0c\u7136\u540e\u518d jenkins \u9875\u9762\u4e2d\u8f93\u5165\u5bc6\u7801"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"cat /var/jenkins_home/secrets/initialAdminPassword\n")),(0,l.kt)("h4",{id:"\u95ee\u9898"},"\u95ee\u9898\uff1a"),(0,l.kt)("p",null,"\u518d\u5b8c\u6210\u4e0a\u4e00\u6b65\u4e4b\u540e\uff0c\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\u4f1a\u51fa\u73b0 ",(0,l.kt)("strong",{parentName:"p"},"\u60a8\u7684 Jenkins \u5df2\u79bb\u7ebf"),"\n",(0,l.kt)("img",{alt:"jenkins\u79bb\u7ebf",src:t(3726).Z,title:"jenkins\u79bb\u7ebf",width:"562",height:"302"})),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u539f\u56e0\u662fjenkins\u5728\u4e0b\u8f7d\u63d2\u4ef6\u4e4b\u524d\u4f1a\u5148\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\uff0c\u5176\u4f1a\u8bfb\u53d6\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u7684\u7f51\u5740\u3002\u9ed8\u8ba4\u662f\uff1a\n\u8bbf\u95ee\u8c37\u6b4c\uff0c\u80af\u5b9a\u8bbf\u95ee\u4e0d\u4e86\uff0c\u6240\u4ee5\u5c06\u56fe\u4e0b\u7684google\u6539\u4e3a",(0,l.kt)("a",{parentName:"p",href:"http://www.baidu.com%E5%8D%B3%E5%8F%AF%EF%BC%8C%E6%9B%B4%E6%94%B9%E5%AE%8C%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1%E3%80%82"},"www.baidu.com\u5373\u53ef\uff0c\u66f4\u6539\u5b8c\u91cd\u542f\u670d\u52a1\u3002"),"\n",(0,l.kt)("img",{alt:"jenkins_default_json",src:t(985).Z,title:"jenkins_default_json",width:"600",height:"54"}))),(0,l.kt)("p",null,"\u9996\u5148\u6211\u4eec\u627e\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"default.json")," \u7684\u4f4d\u7f6e\uff0c\u5148\u8fdb\u5165\u5bb9\u5668",(0,l.kt)("inlineCode",{parentName:"p"},"docker exec -it jenkins bash"),"\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5b58\u653e\u5728\u4e86 ",(0,l.kt)("inlineCode",{parentName:"p"},"/var/jenkins_home/updates/")," \u76ee\u5f55\u4e0b"),(0,l.kt)("p",null,"docker \u4e2d\u7684\u6587\u4ef6\u65e0\u6cd5\u76f4\u63a5\u4fee\u6539"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u65b9\u5f0f\u4e00\uff1a\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"yum -y install vim")," \u6216\u8005 ",(0,l.kt)("inlineCode",{parentName:"li"},"apt-get install vim")," \u547d\u4ee4\u5b89\u88c5\u3002\n\u7136\u540e\u518d\u901a\u8fc7vim\u8fdb\u884c\u4fee\u6539\uff0c",(0,l.kt)("strong",{parentName:"li"},"\u4f46\u8fd9\u79cd\u65b9\u6cd5\u4e0d\u63a8\u8350"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"vim default.json\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u65b9\u5f0f\u4e8c\uff1a\u628a\u5bb9\u5668\u91cc\u9762\u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u672c\u673a\u8fdb\u884c\u4fee\u6539\uff0c\u7136\u540e\u518d\u62f7\u8d1d\u56de\u53bb\n\u547d\u4ee4\u5982\u4e0b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker cp [\u5bb9\u5668\u540d\u5b57]:[\u5177\u4f53\u6587\u4ef6\u5730\u5740] [\u60f3\u8981\u62f7\u8d1d\u5230\u672c\u5730\u7684\u76ee\u6807\u5730\u5740]\n#\u4f8b\u5b50\ndocker cp redis:/test/cptest.txt ./\n")),(0,l.kt)("p",null,"\u5982\u679c\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker cp jenkins:/var/jenkins_home/updates/default.json /root/var/tmp\n")),(0,l.kt)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u628a\u4fee\u6539\u540e\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"default.json")," \u62f7\u8d1d\u56de\u53bb\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker cp /root/var/tmp/default.json jenkins:/var/jenkins_home/updates \n")),(0,l.kt)("p",null,"\u6700\u540e\u4e00\u6b65\uff0c\u6253\u5f00 ",(0,l.kt)("inlineCode",{parentName:"p"},"http://<ip>:8080/pluginManager/advanced")," \u9875\u9762\u6eda\u52a8\u5230\u6700\u5e95\u90e8 Update Site \u7684 URL \u4e3a\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json"},"https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json"))),(0,l.kt)("p",null,"\u8be5\u5730\u5740\u4e3a ",(0,l.kt)("a",{parentName:"p",href:"https://mirrors.tuna.tsinghua.edu.cn/jenkins/plugins/",title:"\u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9"},"\u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"jenkins\u4fee\u6539update_site",src:t(8150).Z,title:"jenkins\u4fee\u6539update_site",width:"1913",height:"784"}),"\n\u5982\u679c\u4e00\u5207\u6b63\u5e38\u7684\u8bdd\uff0c\u5c31\u53ef\u4ee5\u6b63\u5e38\u5b89\u88c5\u63d2\u4ef6\u4e86\n",(0,l.kt)("img",{alt:"jenkins\u63d2\u4ef6\u5b89\u88c5",src:t(2741).Z,title:"jenkins\u63d2\u4ef6\u5b89\u88c5",width:"988",height:"948"})),(0,l.kt)("p",null,"\u5982\u679c\u4e0a\u8ff0\u6b65\u9aa4\u51fa\u95ee\u9898\uff0c\u4e5f\u53ef\u4ee5\u8df3\u8fc7\u63d2\u4ef6\u5b89\u88c5\uff0c\u5728\u91cc\u9762\u624b\u52a8\u4e0b\u8f7d\uff0c\u7136\u540e\u5728 Jenkins \u7684\u63d2\u4ef6\u7ba1\u7406\u91cc\u9762\u624b\u52a8\u5b89\u88c5\u3002"),(0,l.kt)("h3",{id:"\u5b89\u88c5\u63d2\u4ef6"},"\u5b89\u88c5\u63d2\u4ef6"),(0,l.kt)("p",null,"\u9700\u8981\u5b89\u88c5\u4e24\u4e2a\u63d2\u4ef6\uff0c\u5728"),(0,l.kt)("p",null,"\u9996\u9875 > \u7cfb\u7edf\u7ba1\u7406 > \u63d2\u4ef6\u7ba1\u7406 > \u53ef\u9009\u63d2\u4ef6 > \u641c\u7d22\u9009\u4e2d NodeJS > \u5b89\u88c5\u5b8c\u6210\u540e\u91cd\u542f\u670d\u52a1"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"NodeJs: \u4ee3\u7801\u6253\u5305\u65f6\u9700\u8981\u7684\u73af\u5883"),(0,l.kt)("li",{parentName:"ul"},"Publish Over SSH: \u6253\u5305\u5b8c\u6210\u540e\u901a\u8fc7\u8fd9\u4e2a\u63d2\u4ef6ssh\u8fde\u63a5\u53d1\u9001\u5230\u8fdc\u7a0b\u670d\u52a1\u5668")),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u914d\u7f6e NodeJs\n\u8fd9\u4e00\u6b65\u662f\u56e0\u4e3a\u6709\u65f6\u5019\u7528\u6700\u65b0\u7684\u7248\u672c\u5b89\u88c5\u5305\u4f1a\u5931\u8d25\uff0c\u63a8\u8350\u4f7f\u7528\u6700\u65b0\u7684\u7a33\u5b9a\u7248\u672c\uff0c\u6211\u8fd9\u91cc\u662f\u4f7f\u7528\u768416.13.1\u8fd9\u4e2a\u7248\u672c\u3002\u5728")),(0,l.kt)("p",null,"\u9996\u9875 > \u7cfb\u7edf\u7ba1\u7406 > \u5168\u5c40\u5de5\u5177\u5de5\u5177\u914d\u7f6e > NodeJS > \u65b0\u589e\n",(0,l.kt)("img",{alt:"jenkins_node\u914d\u7f6e",src:t(2946).Z,title:"jenkins_node\u914d\u7f6e",width:"1419",height:"949"})),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u65b0\u5efa\u9879\u76ee\u4efb\u52a1\u5b9e\u73b0\u6784\u5efa\u53ca\u90e8\u7f72")),(0,l.kt)("p",null,"(1) \u9996\u9875 > \u65b0\u5efa\u4efb\u52a1 > \u6784\u5efa\u4e00\u4e2a\u81ea\u7531\u98ce\u683c\u7684\u8f6f\u4ef6\u9879\u76ee\n",(0,l.kt)("img",{alt:"jenkins\u65b0\u5efa\u4efb\u52a1",src:t(7097).Z,title:"jenkins\u65b0\u5efa\u4efb\u52a1",width:"1413",height:"976"})),(0,l.kt)("p",null,"(2) git\u6e90\u7801\u7ba1\u7406\n\u914d\u7f6e\u8fd9\u4e00\u6b65\u662f\u8ba9jenkins\u53bb\u54ea\u4e2agit\u4ed3\u5e93\u62c9\u53d6\u4ee3\u7801\u3002\n",(0,l.kt)("img",{alt:"jenkins_git\u914d\u7f6e",src:t(7528).Z,title:"jenkins_git\u914d\u7f6e",width:"1410",height:"985"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Repository URL: git\u4ed3\u5e93\u7684\u5730\u5740"),(0,l.kt)("li",{parentName:"ul"},"Credentials: \u8fde\u63a5git\u4ed3\u5e93\u7684\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u4e00\u822c\u4f7f\u7528Username with password\u6216\u8005Secret Text\u7684\u65b9\u5f0f\uff0c\u524d\u8005\u5c31\u662f\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u65b9\u5f0f\uff0c\u540e\u8005\u662f\u9700\u8981\u751f\u6210token\u5bc6\u94a5\uff0c\u7528\u5bc6\u94a5\u8fde\u63a5\u3002"),(0,l.kt)("li",{parentName:"ul"},"Branches to build: \u6307\u5b9a\u62c9\u53d6\u7684\u5206\u652f")),(0,l.kt)("p",null,"(3) \u6307\u5b9a\u6784\u5efa\u73af\u5883\n",(0,l.kt)("img",{alt:"jenkins\u6784\u5efa\u73af\u5883",src:t(1281).Z,title:"jenkins\u6784\u5efa\u73af\u5883",width:"1379",height:"986"})),(0,l.kt)("p",null,"(4) \u6784\u5efa\u811a\u672c\n",(0,l.kt)("img",{alt:"jenkins\u6784\u5efa\u914d\u7f6e\u811a\u672c",src:t(2527).Z,title:"jenkins\u6784\u5efa\u914d\u7f6e\u811a\u672c",width:"1409",height:"980"})),(0,l.kt)("p",null,"\u8fd9\u91cc\u7684\u547d\u4ee4\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u6765"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"npm install\nnpm run build\ncd dist\ntar zcvf dist.tar.gz *\n")),(0,l.kt)("h2",{id:"\u5b89\u88c5-nginx"},"\u5b89\u88c5 Nginx"),(0,l.kt)("p",null,"\u83b7\u53d6nginx\u5b98\u65b9\u955c\u50cf"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker pull nginx\n")),(0,l.kt)("p",null,"\u5c06nginx\u5173\u952e\u76ee\u5f55\u6620\u5c04\u5230\u672c\u673a\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u65b9\u4fbf\u6211\u4eec\u4fee\u6539 nginx \u7684\u914d\u7f6e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"mkdir -p /root/nginx/www /root/nginx/logs /root/nginx/conf\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"www: nginx\u5b58\u50a8\u7f51\u7ad9\u7f51\u9875\u7684\u76ee\u5f55")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"logs: nginx\u65e5\u5fd7\u76ee\u5f55")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"conf: nginx\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55"))),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"481e121fb29f")," \u4e3a\u5bb9\u5668id,\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker cp 481e121fb29f:/etc/nginx/nginx.conf /root/nginx/conf\n")),(0,l.kt)("p",null,"\u521b\u5efa\u65b0nginx\u5bb9\u5668nginx-web,\u5e76\u5c06 www,logs,conf\u76ee\u5f55\u6620\u5c04\u5230\u672c\u5730"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -d -p 80:80 --name nginx-web -v /root/nginx/www:/usr/share/nginx/html -v /root/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v /root/nginx/logs:/var/log/nginx nginx\n")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"docker \u5bb9\u5668\u72b6\u6001",src:t(4099).Z,title:"docker \u5bb9\u5668\u72b6\u6001",width:"1075",height:"255"})),(0,l.kt)("p",null,"\u914d\u7f6e nginx config\n\u8fdb\u5165\u5230/root/conf/nginx.conf \u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"server {\n  listen 80;\n  charset utf-8;\n  server_name 192.168.112.135;\n\n  location / {\n    proxy_pass http://192.168.112.135:8080;\n    proxy_redirect default;\n  }\n}\n")),(0,l.kt)("p",null,"\u542f\u52a8nginx"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker start nginx-web\n")),(0,l.kt)("p",null,"nginx \u91cd\u542f\u547d\u4ee4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -it nginx service nginx reload\n")),(0,l.kt)("h2",{id:"\u628a\u6253\u5305\u540e\u8fdb\u884c\u90e8\u7f72"},"\u628a\u6253\u5305\u540e\u8fdb\u884c\u90e8\u7f72"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u9996\u5148\u5728 jenkins \u9996\u9875\u914d\u7f6e\u4e0bpublish over ssh\u7684ssh\u8fde\u63a5\u914d\u7f6e\u3002")),(0,l.kt)("p",null,"\u5728 \u9996\u9875 > \u7cfb\u7edf\u7ba1\u7406 > \u7cfb\u7edf\u914d\u7f6e > Publish over SSH > \u65b0\u589e\n",(0,l.kt)("img",{alt:"jenkins_ssh",src:t(2894).Z,title:"jenkins_ssh",width:"1596",height:"778"})),(0,l.kt)("p",null,"\u586b\u5165\u8fd9\u51e0\u4e2a\u914d\u7f6e\u9879\uff0c\u4e3b\u8981\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"Hostname"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"Username"),"\uff0c\u52fe\u9009\u4e0a Use password authentication, or use a different key\uff0c\u7136\u540e\u8f93\u5165",(0,l.kt)("inlineCode",{parentName:"p"},"Password"),"\u3002"),(0,l.kt)("p",null,"\u5b8c\u6210\u4e4b\u540e\u9009\u62e9\u6784\u5efa\u540e\u7684\u64cd\u4f5c\n",(0,l.kt)("img",{alt:"jenkins\u6784\u5efa\u540e\u64cd\u4f5c",src:t(2894).Z,title:"jenkins_ssh",width:"1596",height:"778"})),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"jenkins\u6784\u5efa\u540e\u914d\u7f6e",src:t(8554).Z,title:"jenkins\u6784\u5efa\u540e\u914d\u7f6e",width:"1076",height:"768"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Source files: \u6e90\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f\u521a\u624d\u6211\u4eec\u538b\u7f29\u597d\u7684\u6587\u4ef6\uff0cdist.tar.gz"),(0,l.kt)("li",{parentName:"ul"},"Remove prefix: \u79fb\u9664\u7684\u524d\u7f00\uff0c\u5c31\u662f\u79fb\u9664\u538b\u7f29\u6587\u4ef6\u524d\u9762\u7684dist\u6587\u4ef6\u5939\uff0c\u4e0d\u7136\u79fb\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\u540e\u4e5f\u6709dist\u6587\u4ef6\u5939"),(0,l.kt)("li",{parentName:"ul"},"Exec command: \u5b8c\u6210\u628a\u6587\u4ef6\u79fb\u52a8\u5230\u8fdc\u7a0b\u670d\u52a1\u5668\u540e\u6267\u884c\u7684shell\u547d\u4ee4\uff0c\u8fd9\u91cc\u5927\u6982\u5c31\u662f\u6e05\u7a7a\u4e4b\u524d\u7684\u9879\u76ee\u6587\u4ef6\u5939\u4e0b\u6240\u6709\u6587\u4ef6\uff0c\u7136\u540e\u89e3\u538bdist.tar.gz\u5230\u9879\u76ee\u6587\u4ef6\u5939\u4e0b\uff0c\u6700\u540e\u5220\u9664dist.tar.gz\u538b\u7f29\u5305")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"cd ~\nmv ./dist.tar.gz /root/nginx/www\ncd /root/nginx/www\ntar zxvf dist.tar.gz\nrm -rf dist.tar.gz\n")),(0,l.kt)("p",null,"\u6700\u540e\u4e00\u6b65\u5c31\u662f\u5728 Github \u7684\u9879\u76ee\u4e2d\u6dfb\u52a0 Webhooks"),(0,l.kt)("p",null,"\u914d\u7f6e\u7684 Payload URL \u4e3a ",(0,l.kt)("inlineCode",{parentName:"p"},"http://<jenkins\u5730\u5740>/github-webhook/")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"github_webhook\u914d\u7f6e",src:t(5457).Z,title:"github_webhook\u914d\u7f6e",width:"1794",height:"860"})),(0,l.kt)("p",null,"\u6700\u540e\u63a8\u9001\u4ee3\u7801\uff0c\u5c31\u53ef\u4ee5\u5728 jenkins \u4e2d\u770b\u5230\u4efb\u52a1\u4f1a\u81ea\u52a8\u6784\u5efa\uff0c\u7136\u540e\u8fdb\u884c\u53d1\u5e03\u4e86\u3002"))}c.isMDXComponent=!0},4099:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/docker_ps-cac3d792ae7dbc7047e2947001e698c1.png"},5457:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/github_webhook\u914d\u7f6e-d8264bee399c1065dcb66d6ce5bbe0b6.png"},985:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins_default_json-15e98a4a4b5213cb695db0ccab2b3ac8.png"},7528:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins_git\u914d\u7f6e-90eade415ca63dfe3a7bc43f088ce861.png"},2946:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins_node\u914d\u7f6e-83a84e6fc1f873339d5e215a63ddd043.png"},2894:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins_ssh-8a48b0abca37caae336db10b248ba5b4.png"},8150:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins\u4fee\u6539update_site-f7dee60186a24f5236cf5df2cfab4bea.png"},2592:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins\u521d\u59cb\u5316\u5bc6\u7801-d1fa2865199a517933de949ffcfca1d4.png"},2741:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins\u63d2\u4ef6\u5b89\u88c5-b2975c3c7d383c63522fd323584bd82e.png"},7097:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins\u65b0\u5efa\u4efb\u52a1-2c9763c56689348bdff92b011f56f4bb.png"},8554:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins\u6784\u5efa\u540e\u914d\u7f6e-ba0f6471bf111037f39848abf4a05acf.png"},1281:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins\u6784\u5efa\u73af\u5883-3fca2c14474c4049a216b60b6e39e0d3.png"},2527:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins\u6784\u5efa\u914d\u7f6e\u811a\u672c-f2d69212795638737f642f91b5634e99.png"},3726:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/jenkins\u79bb\u7ebf-6716dadc47f9725d55722ba3fd298e7e.png"},5163:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/\u5b89\u5168\u7ec4\u914d\u7f6e-24de789b43b93a356e97da076d760162.png"}}]);